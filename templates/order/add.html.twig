{% extends 'base.html.twig' %}

{% block title %}Récapitulatif de ma commande - La Boutique Française
{% endblock %}

{% block content %}
	<div class="example-wrapper p-5">
		<h1 class="my-5">Mon récapitulatif</h1>
		<p>Vérifier vos informations avant de payer votre commande</p>
		<hr>
		<div class="row">
			<div class="col-md-6">
				<strong class="recap-title">Mon adresse livraison</strong><br/>
				<span class="form-check my-4">
					{{ delivery|raw }}
				</span>
				<hr>
				<strong class="recap-title">Mon transporteur</strong><br/>
				<span class="form-check my-4">
					{{ carrier.name }}<br/>
					{{ carrier.description }}<br/>
					{{ carrier.price |number_format(2, ',', '.') }}€
				</span>
			</div>
			<div class="col-md-6">
				<b class="recap-title">Ma commande</b>
				<div class="recap-container my-4">
					{% set total = null %}
					{% for key,product in cart %}
						<div class="row {% if key > 0 %}mt-2{% endif %}">
							<div class="col-2 my-3"><img src="/uploads/files/{{ product.product.illustration }}" alt="{{ product.product.name }}" height="75px">
							</div>
							<div class="col-7 my-auto mx-auto">
								{{ product.product.name }}<br/>{{ product.product.subtitle }}<br/>x
								{{ product.quantity }}</div>

							<div class="col-2 my-auto">
								{{ (product.product.price / 100) |number_format(2, ',', '.') }}€
							</div>
							{% set total = total + (product.quantity * product.product.price) %}
						{% endfor %}
					</div>
				</div>
				<hr>
				<span>Sous-total :
					{{ (total / 100) |number_format(2, ',', '.') }}€
				</span><br/>
				<span>Livraison :
					{{ carrier.price |number_format(2, ',', '.') }}€
				</span>
				<hr>
				<span>
					<strong>Total :</strong>
					{{ ((total / 100) + carrier.price)|number_format(2, ',', '.') }}€
				</span>
				<a href="" class="btn btn-success btn-block my-5">Payer |
					{{ ((total / 100) + carrier.price)|number_format(2, ',', '.') }}€</a>
			</div>
		</div>
	{% endblock %}
